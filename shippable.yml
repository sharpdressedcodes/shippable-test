language: php

php:
  - 7.2 #.15

archive: true

branches:
  only:
    - master
    - feature/*
    - fix/*

services:
  - mysql

before_script:
  - sudo apt-get update
#  - sudo php shippable-conf/composer-setup.php --install-dir=bin --filename=composer
#  - sudo mv shippable-conf/composer.phar /usr/local/bin/composer
#  - curl -sS https://getcomposer.org/installer | sudo php -- --install-dir=/usr/local/bin --filename=composer
#  - sudo chown -R $USER:$USER ~/.composer
#  - composer self-update -n
  - mkdir -p ./shippable/codecoverage
  - mkdir -p ./shippable/testresults
  - composer install
  - echo "==========================="
  - pwd
  - ls -la
  - ls -la ./test


script:
  - phpunit --log-junit ./shippable/testresults/junit.xml --coverage-xml ./shippable/codecoverage ./test/ExampleTest.php

after_script:

## Optional: select the node pool or node pools you want to run this job on,if different from default
#runtime:
#
#services:
#  - #any supported service
#
#depth: #postive integer
#
#gitConfig:
#  - #git config 1
#  - #git config 2
#
#vote:
#  on_success:
#    Verified: 1
#    Code-Review: 2
#  on_failure:
#    Verified: -1
#    Code-Review: -2
#
#env:
#  - #env1=foo
#  - #env2=bar
#
#matrix:
#
#build:
#
#  pre_ci:
#    - echo "hello pre ci..."
#
#  pre_ci_boot:
#    image_name:
#    image_tag:
#    pull:
#    options:
#
#  ci:
#    - #command1
#    - #command2
#    - echo "hello ci..."
#
#  post_ci:
#    - #command1
#    - #command2
#    - echo "hello post ci..."
#
#  on_success:
#    - #command1
#    - #command2
#    - echo "on_success triggered..."
#
#  on_failure:
#    - #command1
#    - #command2
#    - echo "on_failure triggered..."
#
#  always:
#    - #command1
#    - #command2
#    - echo "always triggered..."
#
#  cache:
#  cache_dir_list:
#    - #dir1
#  push:
#    - #command1
#
#integrations:
# notifications:
#   - integrationName:
#     type:
#     recipients:
#       - #recp1
#       - #recp2
#
#  hub:
#    - integrationName:
#      type:
#      agent_only:
